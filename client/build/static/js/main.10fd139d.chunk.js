(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{47:function(e,t,a){e.exports=a(80)},52:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),o=a(19),u=a(3),s=(a(52),Object(n.createContext)()),i=Object(n.createContext)(),m=function(e){var t=e.title,a=e.icon,c=Object(n.useContext)(s),l=Object(n.useContext)(i),u=c.isAuthenticated,m=c.user,p=c.logOut,d=l.clearContacts,E=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("li",null,"Hello, ",m&&m.name),r.a.createElement("li",null,r.a.createElement("a",{href:"#!",onClick:p},r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",{className:"hide-sm",onClick:d},"Logout"))))},f=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/login"},"Login")))};return r.a.createElement("div",{className:"navbar bg-primary"},r.a.createElement("h1",null,r.a.createElement("i",{className:a}),"\u2002",t),r.a.createElement("ul",null,u?r.a.createElement(E,null):r.a.createElement(f,null)))};m.defaultProps={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var p=m,d=a(97),E=a(95),f=function(e){var t=e.contact,a=t.name,c=t.email,l=t.phone,o=t.type,u=t._id,s=Object(n.useContext)(i),m=s.deleteContact,p=s.setCurrent;return r.a.createElement("div",{className:"card bg-light"},r.a.createElement("h3",{className:"text-primary text-left"},a," ",r.a.createElement("span",{style:{float:"right"},className:"badge "+("professional"===o?"badge-success":"badge-primary")},o.charAt(0).toUpperCase()+o.slice(1))),r.a.createElement("ul",{className:"list"},c&&r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-envelope-open"})," ",c),l&&r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-phone"})," ",l)),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-dark btn-sm",onClick:function(){return p(t)}},"Edit"),r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){return m(u)}},"Delete")))},b=a(94),C=function(){var e=Object(n.useContext)(i),t=e.contacts,a=e.filtered,c=e.getContact,l=e.loading;return Object(n.useEffect)((function(){c()}),[]),null===t||0!==t.length||l?r.a.createElement(n.Fragment,null,null===t||l?r.a.createElement(b.a,null):r.a.createElement(d.a,null,null!==a?a.map((function(e){return r.a.createElement(E.a,{key:e._id,timeout:500,classNames:"item"},r.a.createElement(f,{contact:e,key:e._id}))})):t.map((function(e){return r.a.createElement(E.a,{key:e._id,timeout:500,classNames:"item"},r.a.createElement(f,{contact:e,key:e._id}))})))):r.a.createElement("h4",null,"Please Add a Contact")},O=a(15),h=a(1),y=a(9),g=function(){var e=Object(n.useContext)(i),t=Object(n.useState)({name:"",email:"",phone:"",type:"personal"}),a=Object(y.a)(t,2),c=a[0],l=a[1],o=e.addContact,u=e.current,s=e.clearCurrent,m=e.updateContact;e.getContact;Object(n.useEffect)((function(){l(null!==u?u:{name:"",email:"",phone:"",type:"personal"})}),[u,e]);var p=c.name,d=c.email,E=c.phone,f=c.type,b=function(e){return l(Object(h.a)(Object(h.a)({},c),{},Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null!==u?(m(c),s()):o(c)}},r.a.createElement("h2",{className:"text-primary"},u?"Update Contact":"Add Contact"),r.a.createElement("input",{type:"text",placeholder:"name",name:"name",value:p,onChange:b}),r.a.createElement("input",{type:"text",placeholder:"email",name:"email",value:d,onChange:b}),r.a.createElement("input",{type:"text",placeholder:"phone",name:"phone",value:E,onChange:b}),r.a.createElement("h5",null,"Contact Type"),r.a.createElement("input",{type:"radio",name:"type",value:"personal",checked:"personal"===f,onChange:b})," ","Personal",r.a.createElement("input",{type:"radio",name:"type",value:"professional",checked:"professional"===f,onChange:b})," ","Professional",u?r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-block btn-light",onClick:s},"Clear")):"",r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:u?"Update Contact":"Add Contact",className:"btn btn-primary btn-block"})))},v=function(){var e=Object(n.useContext)(i),t=Object(n.useRef)(""),a=e.filterContact,c=e.clearFilter,l=e.filtered;Object(n.useEffect)((function(){null===l&&(t.current.value="")}));return r.a.createElement("form",null,r.a.createElement("input",{ref:t,type:"text",placeholder:"Filter Contacts...",onChange:function(e){""!=t.current.value?a(e.target.value):c()}}))},j=function(e){var t=Object(n.useContext)(s),a=t.isAuthenticated;return Object(n.useEffect)((function(){t.loadUser()}),[]),Object(n.useEffect)((function(){a||e.history.push("/login")}),[e.history,a]),r.a.createElement("div",{className:"grid-2"},r.a.createElement("div",null,r.a.createElement(g,null)),r.a.createElement("div",null,r.a.createElement(v,null),r.a.createElement(C,null)))},T=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"About this App"),r.a.createElement("p",{className:"my-1"},"This is a full stack React app for Contact Keeper"),r.a.createElement("p",{className:"bg-dark p"},r.a.createElement("strong",null,"Version : "),"1.0.0"))},R=a(5),A=a.n(R),N=a(13),x=a(10),k=a.n(x),_=a(25),S=function(e,t){switch(t.type){case"GET_CONTACTS":return Object(h.a)(Object(h.a)({},e),{},{contacts:t.payload,loading:!1});case"ADD_CONTACT":return Object(h.a)(Object(h.a)({},e),{},{contacts:[].concat(Object(_.a)(e.contacts),[t.payload]),loading:!1});case"UPDATE_CONTACT":return Object(h.a)(Object(h.a)({},e),{},{contacts:e.contacts.map((function(e){return e._id===t.payload._id?t.payload:e})),loading:!1});case"DELETE_CONTACT":return Object(h.a)(Object(h.a)({},e),{},{contacts:e.contacts.filter((function(e){return e._id!==t.payload})),loading:!1});case"CLEAR_CONTACTS":return{contacts:null,current:null,filtered:null,error:null};case"SET_CURRENT":return Object(h.a)(Object(h.a)({},e),{},{current:t.payload});case"CLEAR_CURRNET":return Object(h.a)(Object(h.a)({},e),{},{current:null});case"FILTER_CONTACTS":return Object(h.a)(Object(h.a)({},e),{},{filtered:e.contacts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");return e.name.match(a)||e.email.match(a)}))});case"CLEAR_FILTER":return Object(h.a)(Object(h.a)({},e),{},{filtered:null});case"CONTACT_ERROR":return Object(h.a)(Object(h.a)({},e),{},{error:t.payload});default:return e}},w={headers:{"Content-Type":"application/json"}},L=function(e){var t=Object(n.useReducer)(S,{contacts:null,current:null,filtered:null,error:null}),a=Object(y.a)(t,2),c=a[0],l=a[1],o=function(){var e=Object(N.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("api/contact");case 3:t=e.sent,l({type:"GET_CONTACTS",payload:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(N.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("api/contact",t,w);case 3:a=e.sent,l({type:"ADD_CONTACT",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(N.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("api/contact/".concat(t));case 3:l({type:"DELETE_CONTACT",payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(N.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.put("api/contact/".concat(t._id),t,w);case 3:a=e.sent,l({type:"UPDATE_CONTACT",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l({type:"CONTACT_ERROR",payload:e.t0.response.msg});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(i.Provider,{value:{contacts:c.contacts,current:c.current,filtered:c.filtered,error:c.error,addContact:u,deleteContact:s,setCurrent:function(e){l({type:"SET_CURRENT",payload:e})},clearCurrent:function(){l({type:"CLEAR_CURRNET"})},updateContact:m,filterContact:function(e){l({type:"FILTER_CONTACTS",payload:e})},clearFilter:function(){l({type:"CLEAR_FILTER"})},getContact:o,clearContacts:function(){l({type:"CLEAR_CONTACTS"})}}},e.children)},I=function(e,t){switch(t.type){case"USER_LOADED":return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,loading:!1,user:t.payload});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)(Object(h.a)({},e),t.payload),{},{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});default:return e}},U=function(e){e?k.a.defaults.headers.common["x-auth-token"]=e:delete k.a.defaults.headers.common["x-auth-token"]},F={headers:{"Content-Type":"application/json"}},D=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,user:null,loading:!0,error:null},a=Object(n.useReducer)(I,t),c=Object(y.a)(a,2),l=c[0],o=c[1],u=function(){var e=Object(N.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.token&&U(localStorage.token),e.prev=1,e.next=4,k.a.get("/api/auth");case 4:t=e.sent,o({type:"USER_LOADED",payload:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"AUTH_ERROR",payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(N.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/user",t,F);case 3:a=e.sent,o({type:"REGISTER_SUCCESS",payload:a.data}),u(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o({type:"REGISTER_FAIL",payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(N.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.post("/api/auth",t,F);case 3:a=e.sent,o({type:"LOGIN_SUCCESS",payload:a.data}),u(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o({type:"LOGIN_FAIL",payload:e.t0.response.data.msg});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(s.Provider,{value:{token:l.token,isAuthenticated:l.isAuthenticated,user:l.user,loading:l.loading,error:l.error,register:i,loadUser:u,logIn:m,logOut:function(){o({type:"LOGOUT"})},clearErrors:function(){return Object(h.a)(Object(h.a)({},l),{},{error:null})}}},e.children)},P=(0,a(0).createContext)(),G=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(_.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},q=a(96),H=function(e){var t=Object(n.useReducer)(G,[]),a=Object(y.a)(t,2),c=a[0],l=a[1];return r.a.createElement(P.Provider,{value:{alerts:c,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=Object(q.a)();l({type:"SET_ALERT",payload:{msg:e,type:t,id:n}}),setTimeout((function(){return l({type:"REMOVE_ALERT",payload:n})}),a)}}},e.children)},K=function(e){var t=Object(n.useContext)(P),a=Object(n.useContext)(s),c=t.setAlert,l=a.register,o=a.error,u=a.clearErrors,i=a.isAuthenticated,m=Object(n.useState)({name:"",email:"",password:"",password2:""}),p=Object(y.a)(m,2),d=p[0],E=p[1],f=d.name,b=d.email,C=d.password,g=d.password2,v=function(e){E(Object(h.a)(Object(h.a)({},d),{},Object(O.a)({},e.target.name,e.target.value)))};Object(n.useEffect)((function(){i&&e.history.push("/"),"user is already exists"===o&&(c(o,"danger"),u())}),[o,i,e.history]);var j=function(e){e.preventDefault(),""===f||""===b||""===C?c("Please enter all fields","danger"):C!==g?c("Password does not matched","danger"):l({name:f,email:b,password:C})};return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"Account ",r.a.createElement("span",{className:"text-primary"},"Register")),r.a.createElement("form",{onSubmit:j},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",value:f,onChange:v,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",value:b,onChange:v,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:C,onChange:v,required:!0,minLength:"6"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"password2",value:g,onChange:v,required:!0,minLength:"6"})),r.a.createElement("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block",onClick:j})))},M=function(e){var t=Object(n.useContext)(P),a=Object(n.useContext)(s),c=t.setAlert,l=a.logIn,o=a.error,u=a.clearErrors,i=a.isAuthenticated;Object(n.useEffect)((function(){i&&e.history.push("/"),o&&(c(o,"danger"),u())}),[e.history,i,o]);var m=Object(n.useState)({email:"",password:""}),p=Object(y.a)(m,2),d=p[0],E=p[1],f=d.email,b=d.password,C=function(e){E(Object(h.a)(Object(h.a)({},d),{},Object(O.a)({},e.target.name,e.target.value)))},g=function(e){e.preventDefault(),""===f||""===b?c("Please insert email and password","danger"):l({email:f,password:b})};return r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,"Contact Keeper ",r.a.createElement("span",{className:"text-primary"},"Login")),r.a.createElement("form",{onSubmit:g},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",value:f,onChange:C,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:b,onChange:C,required:!0})),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block",onClick:g})))},V=function(){var e=Object(n.useContext)(P);return e.alerts.length>0&&e.alerts.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.type)},r.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)}))};localStorage.token&&U(localStorage.token);var J=function(){return r.a.createElement(D,null,r.a.createElement(L,null,r.a.createElement(H,null,r.a.createElement(o.a,null,r.a.createElement(p,null),r.a.createElement("div",{className:"container"},r.a.createElement(V,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:j}),r.a.createElement(u.a,{exact:!0,path:"/About",component:T}),r.a.createElement(u.a,{exact:!0,path:"/register",component:K}),r.a.createElement(u.a,{exact:!0,path:"/login",component:M})))))))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.10fd139d.chunk.js.map